
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#0b0c0c">
<title>Password Foundry</title>
<meta name="description" content="Offline password generator — retro hacker skin with live clock and a tiny robot cowboy with a tumbleweed.">
<style>
  :root{
    --bg:#0b0c0c;
    --amber:#d2b36c;
    --green:#00d47e;
    --accent:var(--amber);
    --text:var(--accent);
    --muted:#8b8b8b;
    --panel:#111213;
    --panel-2:#0e0f0f;
    --walk-duration: 30s;
    --walk-delay: 0s;
    --roll-duration: 36s;
    --roll-delay: 1.2s;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background:
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' fill='%230b0c0c'/%3E%3Cpath d='M0 0H32 M0 16H32 M0 32H32 M0 0V32 M16 0V32 M32 0V32' stroke='%231f201f' stroke-width='0.7'/%3E%3C/svg%3E") repeat,
      var(--bg);
    color:var(--text);
    font:clamp(14px, 1.4vw, 16px)/1.5 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New",monospace;
    letter-spacing:.2px;
    -webkit-font-smoothing: antialiased;
    text-shadow: 0 0 6px color-mix(in oklab, var(--accent) 50%, transparent);
  }
  body::before{
    content:"";
    position:fixed; inset:0;
    background:
      repeating-linear-gradient(to bottom, rgba(255,255,255,0.04), rgba(255,255,255,0.04) 1px, transparent 1px, transparent 3px),
      radial-gradient(ellipse at center, transparent 60%, rgba(0,0,0,.35));
    pointer-events:none; mix-blend-mode:overlay;
  }

  .wrap{max-width:1000px; margin:0 auto; padding:16px 16px 144px;}
  header{
    display:flex; align-items:center; gap:12px; justify-content:space-between;
    padding:8px 0 12px; border-bottom:1px solid color-mix(in oklab, var(--accent) 30%, transparent);
    position:sticky; top:0; background:linear-gradient(180deg, rgba(11,12,12,.96), rgba(11,12,12,.80));
    backdrop-filter: blur(2px);
    z-index:5;
  }
  .brand{display:flex; align-items:baseline; gap:10px}
  .brand h1{margin:0; font-size:clamp(18px, 2.4vw, 20px); letter-spacing:2px}
  .badge{font-size:12px; padding:2px 8px; border:1px solid var(--accent); border-radius:6px; opacity:.8}
  .clock{font-feature-settings:"tnum"; letter-spacing:1px; user-select:none}
  .controls{display:grid; grid-template-columns:1fr; gap:14px; margin:18px 0}
  .panel{
    background:linear-gradient(180deg, var(--panel), var(--panel-2));
    border:1px solid color-mix(in oklab, var(--accent) 25%, transparent);
    border-radius:12px; padding:16px;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.03), 0 2px 16px rgba(0,0,0,.3);
  }
  .row{display:flex; flex-wrap:wrap; gap:12px; align-items:center}
  .row > label{display:flex; align-items:center; gap:8px}
  input[type="range"]{width:240px}
  .muted{color:color-mix(in oklab, var(--accent) 45%, #888)}
  .btn{
    display:inline-flex; align-items:center; gap:8px;
    padding:10px 14px; border-radius:10px;
    border:1px solid var(--accent); background:transparent; color:var(--text);
    cursor:pointer; text-transform:uppercase; letter-spacing:1px; font-weight:600;
    touch-action:manipulation;
  }
  .btn:hover{box-shadow:0 0 12px color-mix(in oklab, var(--accent) 25%, transparent)}
  .btn.secondary{border-color:color-mix(in oklab, var(--accent) 35%, transparent); opacity:.9}
  .btn.small{padding:8px 12px; font-size:13px}
  .preset-bar{display:flex; flex-wrap:wrap; gap:8px}
  .preset-bar .btn{position:relative}
  .preset-bar .btn[data-default="1"]::after{content:"★"; position:absolute; top:-8px; right:-8px; font-size:12px;}
  .preset-actions{display:flex; gap:8px; align-items:center}
  .out{display:flex; gap:10px; align-items:stretch; margin-top:8px}
  .password{
    flex:1; background:black; color:var(--text);
    border:1px dashed var(--accent); border-radius:10px;
    padding:14px; font-size:18px; letter-spacing:1px;
    filter: drop-shadow(0 0 3px color-mix(in oklab, var(--accent) 40%, transparent));
    overflow:auto;
    min-height:56px;
    white-space:pre-wrap;
    word-break:break-all;
  }
  .toast{position:fixed; right:12px; bottom:12px; background:#111; border:1px solid var(--accent); padding:10px 14px; border-radius:8px; opacity:0; transform:translateY(8px); transition:.2s}
  .toast.show{opacity:1; transform:translateY(0)}

  .toggle{display:inline-flex; align-items:center; gap:8px; cursor:pointer}
  .toggle input{appearance:none; width:44px; height:24px; background:#222; border:1px solid var(--accent); border-radius:20px; position:relative; outline:none}
  .toggle input::after{content:""; position:absolute; top:2px; left:2px; width:18px; height:18px; border-radius:50%; background:var(--accent); transition:.2s}
  .toggle input:checked::after{left:22px}

  /* Stage */
  .stage{position:fixed; left:0; right:0; bottom:0; height:176px; pointer-events:none; overflow:hidden; z-index:2}
  .ground{
    position:absolute; left:0; right:0; bottom:0; height:2px;
    background:linear-gradient(90deg, color-mix(in oklab, var(--accent) 50%, transparent) 0 50%, transparent 50% 100%);
    background-size:16px 2px; opacity:.6;
  }
  .robot{
    position:absolute; bottom:24px; left:0; width:148px; height:116px; opacity:.98;
    filter: drop-shadow(0 0 4px color-mix(in oklab, var(--accent) 40%, transparent)); color:var(--accent);
    stroke-linecap:round; stroke-linejoin:round;
  }
  @keyframes stroll {0% {transform: translateX(-160px)} 100% {transform: translateX(calc(100vw + 160px))}}
  @keyframes bob {0%,100% { transform: translateY(0) } 50% { transform: translateY(-1.5px) }}
  .walk{animation: stroll var(--walk-duration) linear infinite var(--walk-delay);}
  .walk .inner{animation: bob .8s ease-in-out infinite;}
  .idle{left:40vw !important; transform:none !important;}

  /* Simple leg swing */
  .legL, .legR{ transform-box: fill-box; transform-origin: 50% 0%; }
  @keyframes stepL { 0%, 100% { transform: rotate(6deg) } 50% { transform: rotate(-6deg) } }
  @keyframes stepR { 0%, 100% { transform: rotate(-6deg) } 50% { transform: rotate(6deg) } }
  .walk .legL{ animation: stepL .6s ease-in-out infinite; }
  .walk .legR{ animation: stepR .6s ease-in-out infinite; }

  .weed{position:absolute; bottom:12px; left:0; width:56px; height:56px; opacity:.95; color:var(--accent);}
  @keyframes roll {0% {transform: translateX(-60px) rotate(0deg)} 100%{transform: translateX(calc(100vw + 60px)) rotate(860deg)}}
  .roll{ animation: roll var(--roll-duration) linear infinite var(--roll-delay); }

  @media (prefers-reduced-motion: reduce){
    .walk, .roll { animation: none !important; }
    .robot{ left:40vw }
  }

  .theme-pill{display:inline-flex; gap:6px; border:1px solid var(--accent); border-radius:999px; padding:4px 6px; align-items:center}
  .theme-dot{width:10px; height:10px; border-radius:50%}
  .amber .theme-dot.amber{outline:1px solid var(--accent)}
  .green  .theme-dot.green {outline:1px solid var(--accent)}

  .footer-note{margin-top:8px; font-size:12px; opacity:.75}
  [hidden]{display:none !important}

  /* ===== Mobile tweaks ===== */
  @media (max-width: 640px){
    .wrap{padding:12px 12px 120px;}
    input[type="range"]{width:100%}
    header .row{gap:8px}
    .btn.small{font-size:12px; padding:8px 10px}
    .toggle input{width:52px; height:28px}
    .toggle input::after{width:22px; height:22px}
    .out{flex-direction:column}
    .password{font-size:16px}
    .robot{width:118px; bottom:20px}
    .weed{width:44px; height:44px}
    .stage{height:136px}
  }
  @media (max-width: 380px){
    .brand h1{letter-spacing:1px}
    .clock{font-size:12px}
    .stage{height:124px}
    .robot{width:104px}
  }
</style>
</head>
<body class="amber">
  <div class="wrap">
    <header>
      <div class="brand">
        <h1>Password ▒ Foundry</h1>
        <span class="badge">OFFLINE</span>
        <div class="theme-pill" id="themeSwitch" title="Toggle theme">
          <div class="theme-dot amber" style="background:#d2b36c" aria-label="Amber"></div>
          <div class="theme-dot green"  style="background:#00d47e" aria-label="Green"></div>
        </div>
      </div>
      <div class="row">
        <label class="toggle" title="Enable animations">
          <input type="checkbox" id="animToggle" checked><span class="muted">Animations</span>
        </label>
        <label class="toggle" title="Show robot cowboy">
          <input type="checkbox" id="cowboyToggle" checked><span class="muted">Cowboy</span>
        </label>
        <label class="toggle" title="Show tumbleweed">
          <input type="checkbox" id="weedToggle" checked><span class="muted">Tumbleweed</span>
        </label>
        <div class="clock" id="clock">-- --- ---- · --:--:--</div>
      </div>
    </header>

    <section class="panel">
      <div class="controls">

        <!-- Mode selector -->
        <div class="row">
          <strong>Mode:</strong>
          <label><input type="radio" name="mode" id="modePassword" value="password" checked> Password</label>
          <label><input type="radio" name="mode" id="modeUUID" value="uuid"> UUID</label>
          <label><input type="radio" name="mode" id="modeWords" value="words"> Words</label>
        </div>

        <!-- PASSWORD OPTIONS -->
        <div id="passwordOptions">
          <div class="row">
            <label>Length <span id="lenVal" class="muted">20</span></label>
            <input type="range" id="len" min="4" max="64" value="20" step="1">
            <label class="toggle" title="Exclude ambiguous: O/0, I/1, l, o (and similar)">
              <input type="checkbox" id="noAmbig" checked><span class="muted">Avoid ambiguous</span>
            </label>
            <button class="btn small secondary" id="btnDefault">Reset</button>
          </div>
          <div class="row">
            <label><input type="checkbox" id="lower" checked> a–z</label>
            <label><input type="checkbox" id="upper" checked> A–Z</label>
            <label><input type="checkbox" id="digits" checked> 0–9</label>
            <label><input type="checkbox" id="symbols" checked> !@#…</label>
          </div>
          <div>
            <div class="row preset-actions">
              <div class="muted" style="margin-bottom:6px">Presets</div>
              <button class="btn small secondary" id="favPresetBtn" title="Set current preset as default">Set ★ Default</button>
            </div>
            <div class="preset-bar" id="presetBar"></div>
          </div>
        </div>

        <!-- UUID OPTIONS -->
        <div id="uuidOptions" hidden>
          <div class="row">
            <label class="toggle" title="Upper-case hex digits">
              <input type="checkbox" id="uuidUpper"><span class="muted">Uppercase</span>
            </label>
            <label class="toggle" title="Remove dashes">
              <input type="checkbox" id="uuidNodash"><span class="muted">No dashes</span>
            </label>
            <span class="muted">Generates RFC 4122 version 4 UUIDs</span>
          </div>
        </div>

        <!-- WORDS OPTIONS -->
        <div id="wordsOptions" hidden>
          <div class="row">
            <label>Words <span id="wCountVal" class="muted">6</span></label>
            <input type="range" id="wCount" min="3" max="12" value="6" step="1">
            <label>Separator
              <select id="wSep">
                <option value="space">space</option>
                <option value="-">-</option>
                <option value=".">.</option>
                <option value="_">_</option>
                <option value="custom">custom</option>
              </select>
            </label>
            <input id="wSepCustom" placeholder="custom" class="btn small" style="width:90px" />
            <label>Case
              <select id="wCase">
                <option value="lower">lower</option>
                <option value="title">Title</option>
                <option value="upper">UPPER</option>
              </select>
            </label>
          </div>
          <div class="row">
            <label class="toggle" title="Append one random digit">
              <input type="checkbox" id="wDigitPepper"><span class="muted">Digit pepper</span>
            </label>
            <label class="toggle" title="Append one random symbol">
              <input type="checkbox" id="wSymPepper"><span class="muted">Symbol pepper</span>
            </label>
          </div>
        </div>

        <div class="out">
          <div id="pw" class="password" title="Output"></div>
          <div style="display:flex; flex-direction:column; gap:8px">
            <button class="btn" id="gen">Generate</button>
            <button class="btn secondary" id="copy">Copy</button>
            <button class="btn secondary" id="reveal" aria-pressed="false">Show</button>
          </div>
        </div>
        <div class="footer-note muted">Runs entirely in your browser; nothing is sent anywhere.</div>
      </div>
    </section>
  </div>

  <div class="stage" aria-hidden="true">
    <div class="ground"></div>
    <svg class="robot idle" id="robot" viewBox="0 0 130 110" fill="none" stroke="currentColor" stroke-width="2">
      <g class="inner">
        <path d="M10 26 Q65 8 120 24 L116 30 Q66 22 14 30 Z"/>
        <rect x="44" y="28" width="46" height="24" rx="4"/>
        <circle cx="58" cy="40" r="4"/><circle cx="76" cy="40" r="4"/>
        <path d="M50 54 H84 v22 H50 Z" />
        <path d="M50 64 H84" />
        <path d="M44 60 l-12 10" /> <path d="M90 60 l12 10" />
        <g class="legL"><path d="M58 76 l-6 14" /></g>
        <g class="legR"><path d="M76 76 l6 14" /></g>
        <path d="M52 92 l-5 -5 m5 5 l5 -5" />
        <path d="M82 92 l-5 -5 m5 5 l5 -5" />
        <path d="M86 66 l10 4 l-2 6" />
        <circle cx="104" cy="54" r="6"/>
      </g>
    </svg>

    <svg class="weed" id="weed" viewBox="0 0 52 52" fill="none" stroke="currentColor" stroke-width="1.8">
      <circle cx="26" cy="26" r="20"/>
      <path d="M6 22 C14 28, 18 30, 26 26"/>
      <path d="M14 12 C20 18, 24 20, 32 16"/>
      <path d="M22 36 C26 32, 30 30, 38 34"/>
      <path d="M30 10 C32 16, 28 18, 40 22"/>
      <path d="M8 34 C14 32, 20 30, 18 42"/>
    </svg>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite">Copied to clipboard</div>

<script>
(function(){
  const $ = sel => document.querySelector(sel);
  const $$ = sel => document.querySelectorAll(sel);
  const els = {
    // Modes
    modeRadios: $$('input[name="mode"]'),
    passwordOptions: $('#passwordOptions'),
    uuidOptions: $('#uuidOptions'),
    wordsOptions: $('#wordsOptions'),
    // Password controls
    len: $('#len'), lenVal: $('#lenVal'),
    lower: $('#lower'), upper: $('#upper'), digits: $('#digits'), symbols: $('#symbols'),
    noAmbig: $('#noAmbig'),
    // UUID controls
    uuidUpper: $('#uuidUpper'), uuidNodash: $('#uuidNodash'),
    // Words controls
    wCount: $('#wCount'), wCountVal: $('#wCountVal'), wSep: $('#wSep'), wSepCustom: $('#wSepCustom'),
    wCase: $('#wCase'), wDigitPepper: $('#wDigitPepper'), wSymPepper: $('#wSymPepper'),
    // General
    gen: $('#gen'), copy: $('#copy'), reveal: $('#reveal'), pw: $('#pw'),
    toast: $('#toast'), clock: $('#clock'),
    btnDefault: $('#btnDefault'),
    animToggle: $('#animToggle'),
    cowboyToggle: $('#cowboyToggle'),
    weedToggle: $('#weedToggle'),
    themeSwitch: $('#themeSwitch'),
    robot: $('#robot'), weed: $('#weed'),
    presetBar: $('#presetBar'), favBtn: $('#favPresetBtn')
  };

  // Local UI state
  const state = { reveal: false, plain: '' };

  // Theme persistence
  const theme = localStorage.getItem('pf_theme') || 'amber';
  setTheme(theme);
  $('#themeSwitch').addEventListener('click', () => {
    const next = document.body.classList.contains('amber') ? 'green' : 'amber';
    setTheme(next);
  });
  function setTheme(name){
    document.body.classList.toggle('amber', name==='amber');
    document.body.classList.toggle('green', name==='green');
    document.documentElement.style.setProperty('--accent',
      getComputedStyle(document.documentElement).getPropertyValue(name==='amber'?'--amber':'--green'));
    localStorage.setItem('pf_theme', name);
  }

  // Clock
  function pad(n){return n<10?('0'+n):n}
  function fmtClock(d){
    const months = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
    return pad(d.getDate())+" "+months[d.getMonth()]+" "+d.getFullYear()+" · "
      + pad(d.getHours())+":"+pad(d.getMinutes())+":"+pad(d.getSeconds());
  }
  function tick(){ els.clock.textContent = fmtClock(new Date()); }
  tick(); setInterval(tick, 1000);

  // Mode switching
  els.modeRadios.forEach(r => r.addEventListener('change', updateModeUI));
  function getMode(){ return [...els.modeRadios].find(r=>r.checked)?.value || 'password'; }
  function updateModeUI(){
    const m = getMode();
    els.passwordOptions.hidden = m !== 'password';
    els.uuidOptions.hidden = m !== 'uuid';
    els.wordsOptions.hidden = m !== 'words';
    renderOut(); // preserve reveal state
  }
  updateModeUI();

  // Length display & reset
  els.len.addEventListener('input', () => els.lenVal.textContent = els.len.value);
  $('#btnDefault').addEventListener('click', () => {
    els.len.value = 20; els.len.dispatchEvent(new Event('input'));
    ['lower','upper','digits','symbols'].forEach(id => els[id].checked = true);
    els.noAmbig.checked = true;
  });
  els.wCount.addEventListener('input', () => els.wCountVal.textContent = els.wCount.value);

  // Presets
  const PRESETS = [
    {id:'banking',  label:'Banking 20',  len:20, sets:['lower','upper','digits','symbols'], avoidAmbig:true, tip:'Strong, 4 classes, 20 chars'},
    {id:'devops',   label:'DevOps 32',   len:32, sets:['lower','upper','digits','symbols'], avoidAmbig:true, tip:'Long service creds / secrets'},
    {id:'wifi',     label:'Wi-Fi 16',    len:16, sets:['upper','digits'], avoidAmbig:true, tip:'Uppercase + digits, readable'},
    {id:'mem',      label:'Memorable 16',len:16, sets:['lower','digits'], avoidAmbig:true, tip:'Lower + digits only'},
    {id:'long64',   label:'Long 64',     len:64, sets:['lower','upper','digits','symbols'], avoidAmbig:false, tip:'Max brute-force resistance'},
    {id:'pin6',     label:'PIN 6',       len:6,  sets:['digits'], avoidAmbig:false, tip:'6-digit numeric (not for banking!)'},
    {id:'pin8',     label:'PIN 8',       len:8,  sets:['digits'], avoidAmbig:false, tip:'8-digit numeric'},
    {id:'voucher12',label:'Voucher 12',  len:12, sets:['upper','digits'], avoidAmbig:true, tip:'Redeem codes (readable)'},
    {id:'alnum24',  label:'Alnum 24',    len:24, sets:['lower','upper','digits'], avoidAmbig:true, tip:'Letters + digits only'},
  ];
  function renderPresets(){
    els.presetBar.innerHTML='';
    const fav = localStorage.getItem('pf_defaultPreset') || 'banking';
    PRESETS.forEach(p => {
      const b = document.createElement('button');
      b.className = 'btn small';
      b.textContent = p.label; b.dataset.preset = p.id; b.title = p.tip;
      if(p.id===fav) b.dataset.default='1';
      b.addEventListener('click', () => { applyPreset(p.id, true) });
      els.presetBar.appendChild(b);
    });
  }
  function applyPreset(id, andGenerate=false){
    const p = PRESETS.find(x=>x.id===id); if(!p) return;
    $('#modePassword').checked = true; updateModeUI();
    els.len.value = p.len; els.len.dispatchEvent(new Event('input'));
    ['lower','upper','digits','symbols'].forEach(k => els[k].checked = p.sets.includes(k));
    els.noAmbig.checked = !!p.avoidAmbig;
    if(andGenerate) generate();
  }
  function currentPresetId(){
    const s = ['lower','upper','digits','symbols'].filter(k=>els[k].checked);
    const len = parseInt(els.len.value,10);
    const amb = els.noAmbig.checked;
    const match = PRESETS.find(p => p.len===len && amb===!!p.avoidAmbig && p.sets.length===s.length && p.sets.every(k=>s.includes(k)));
    return match ? match.id : 'custom';
  }
  $('#favPresetBtn').addEventListener('click', () => {
    const id = currentPresetId();
    localStorage.setItem('pf_defaultPreset', id);
    renderPresets();
    toast('Default preset set to: '+ (PRESETS.find(p=>p.id===id)?.label || id));
  });
  renderPresets();
  applyPreset(localStorage.getItem('pf_defaultPreset') || 'banking', true);

  // RNG helpers
  function randInt(max){
    if(window.crypto && window.crypto.getRandomValues){
      const arr = new Uint32Array(1);
      window.crypto.getRandomValues(arr);
      return arr[0] % max;
    }
    return Math.floor(Math.random() * max);
  }
  function sample(set){ return set[randInt(set.length)] }

  // Generators
  function genPassword(){
    let lower = "abcdefghijklmnopqrstuvwxyz";
    let upper = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    let digits = "0123456789";
    let symbols = "!@#$%^&*()-_=+[]{};:,.?/~";
    if(els.noAmbig.checked){
      lower = lower.replace(/[ilo]/g, '');
      upper = upper.replace(/[IOL]/g, '');
      digits = digits.replace(/[01]/g, '');
    }
    const sets = [];
    if(els.lower.checked && lower.length) sets.push(lower);
    if(els.upper.checked && upper.length) sets.push(upper);
    if(els.digits.checked && digits.length) sets.push(digits);
    if(els.symbols.checked) sets.push(symbols);
    const length = Math.max(1, parseInt(els.len.value,10));
    if(sets.length===0) return "Select ≥1 character set";
    let out = [];
    sets.forEach(s => out.push(sample(s)));
    const combined = sets.join('');
    for(let i=out.length; i<length; i++){ out.push(sample(combined)); }
    for(let i=out.length-1; i>0; i--){ const j = randInt(i+1); [out[i], out[j]] = [out[j], out[i]]; }
    return out.join('');
  }
  function genUUID(){
    const bytes = new Uint8Array(16);
    (window.crypto && crypto.getRandomValues) ? crypto.getRandomValues(bytes) : bytes.fill(Math.random()*255|0);
    bytes[6] = (bytes[6] & 0x0f) | 0x40;
    bytes[8] = (bytes[8] & 0x3f) | 0x80;
    const hex = Array.from(bytes, b => b.toString(16).padStart(2,'0'));
    let s = hex.slice(0,4).join('')+'-'+hex.slice(4,6).join('')+'-'+hex.slice(6,8).join('')+'-'+hex.slice(8,10).join('')+'-'+hex.slice(10,16).join('');
    if($('#uuidNodash').checked) s = s.replace(/-/g,'');
    if($('#uuidUpper').checked) s = s.toUpperCase();
    return s;
  }
  const WORDLIST = ["able", "acid", "aged", "also", "area", "army", "away", "baby", "back", "bake", "ball", "band", "bank", "base", "bath", "beam", "bear", "beat", "been", "beer", "bell", "belt", "best", "bill", "bird", "bite", "blue", "boat", "body", "book", "boom", "born", "boss", "both", "bowl", "bulk", "burn", "bush", "busy", "cake", "call", "calm", "came", "camp", "card", "care", "case", "cash", "cast", "cell", "chat", "chef", "chip", "city", "clay", "club", "coal", "coat", "code", "cold", "come", "cook", "cool", "cope", "copy", "core", "cost", "crew", "crop", "dark", "data", "date", "dawn", "days", "dead", "deal", "dean", "dear", "debt", "deep", "deny", "desk", "dial", "diet", "dine", "disk", "does", "done", "door", "dose", "down", "draw", "drop", "drum", "duck", "duty", "each", "earn", "east", "easy", "edge", "edit", "else", "even", "ever", "exam", "exit", "face", "fact", "fail", "fair", "fall", "farm", "fast", "fear", "feed", "feel", "file", "fill", "film", "find", "fire", "firm", "fish", "five", "flat", "flow", "fold", "food", "foot", "form", "fort", "four", "free", "from", "fuel", "full", "fund", "gain", "game", "gate", "gear", "gems", "gift", "girl", "give", "glad", "goal", "goes", "gold", "golf", "good", "gray", "grew", "grey", "grow", "guest", "half", "hall", "hand", "hard", "harm", "hate", "have", "head", "hear", "heat", "help", "here", "hero", "high", "hill", "hire", "hold", "hole", "home", "hope", "host", "hour", "huge", "idea", "idle", "inch", "info", "iron", "item", "jack", "jazz", "join", "joke", "jump", "keep", "kept", "kick", "kids", "kind", "king", "kiss", "knew", "know", "lack", "lady", "lake", "lamp", "land", "lane", "last", "late", "lazy", "lead", "leaf", "lean", "left", "less", "life", "lift", "like", "line", "link", "lips", "list", "live", "load", "loan", "lock", "logo", "long", "look", "loop", "loot", "lord", "lose", "lost", "love", "luck", "made", "main", "make", "male", "many", "mark", "mass", "mate", "meal", "mean", "meet", "melt", "memo", "menu", "mild", "milk", "mind", "mine", "mint", "miss", "moon", "more", "most", "move", "much", "must", "name", "navy", "near", "neat", "neck", "need", "news", "next", "nice", "nine", "node", "none", "norm", "nose", "note", "okay", "once", "only", "open", "opera", "oral", "ours", "pace", "pack", "page", "paid", "pain", "pair", "palm", "park", "part", "pass", "past", "path", "peak", "peer", "pick", "pile", "pill", "pipe", "plan", "play", "plot", "plug", "plus", "poll", "pool", "poor", "port", "post", "pour", "pray", "prep", "prim", "pull", "pure", "push", "puzz", "quad", "queen", "quit", "quiz", "race", "rail", "rain", "rank", "rare", "rate", "read", "real", "rear", "rely", "rent", "rest", "rice", "rich", "ride", "ring", "rise", "risk", "road", "rock", "role", "roll", "roof", "room", "root", "rose", "rule", "rush", "safe", "said", "sail", "salt", "sand", "save", "scan", "seal", "seat", "seed", "seek", "seem", "seen", "self", "sell", "send", "sent", "sets", "shop", "show", "shut", "sick", "side", "sign", "silk", "sing", "sink", "site", "size", "skin", "slim", "slow", "snow", "soap", "soft", "soil", "sold", "sole", "solo", "some", "song", "soon", "sort", "soul", "spot", "star", "stay", "stem", "step", "stop", "such", "suit", "sure", "swap", "tack", "tail", "take", "talk", "tall", "tank", "task", "team", "tech", "tend", "term", "test", "text", "than", "that", "them", "then", "they", "thin", "this", "thus", "time", "tiny", "tire", "told", "toll", "tone", "tool", "tour", "town", "trip", "true", "tune", "turn", "twin", "type", "unit", "upon", "urge", "used", "user", "vast", "very", "view", "vote", "wait", "wake", "walk", "wall", "want", "warm", "warn", "wash", "wave", "ways", "weak", "wear", "week", "well", "west", "what", "when", "whom", "wide", "wife", "wild", "will", "wind", "wine", "wing", "wire", "wise", "wish", "with", "wolf", "wood", "word", "wore", "work", "yard", "year", "yoga", "zero"];
  function genWords(){
    const count = parseInt($('#wCount').value,10);
    let sep = $('#wSep').value==='space' ? ' ' : $('#wSep').value;
    if($('#wSep').value==='custom'){ sep = $('#wSepCustom').value || '-'; }
    const words = [];
    for(let i=0;i<count;i++) words.push( WORDLIST[randInt(WORDLIST.length)] );
    const style = $('#wCase').value;
    for(let i=0;i<words.length;i++){
      if(style==='upper') words[i] = words[i].toUpperCase();
      else if(style==='title') words[i] = words[i].charAt(0).toUpperCase()+words[i].slice(1);
    }
    let out = words.join(sep);
    if($('#wDigitPepper').checked) out += String(randInt(10));
    if($('#wSymPepper').checked) out += sample("!@#$%^&*");
    return out;
  }

  // Rendering helpers
  function renderOut(){
    const plain = state.plain || '';
    els.pw.textContent = state.reveal ? plain : '*'.repeat(plain.length || 12);
  }

  function generate(){
    const m = getMode();
    if(m==='password') state.plain = genPassword();
    else if(m==='uuid') state.plain = genUUID();
    else if(m==='words') state.plain = genWords();
    renderOut();
  }

  // Buttons
  $('#gen').addEventListener('click', generate);
  $('#reveal').addEventListener('click', () => {
    state.reveal = !state.reveal;
    els.reveal.textContent = state.reveal ? 'Hide' : 'Show';
    els.reveal.setAttribute('aria-pressed', String(state.reveal));
    renderOut();
  });
  function toast(msg){ els.toast.textContent = msg; els.toast.classList.add('show'); setTimeout(()=>els.toast.classList.remove('show'),1500); }
  $('#copy').addEventListener('click', async () => {
    try{
      await navigator.clipboard.writeText(state.plain || '');
      toast('Copied to clipboard');
    }catch(e){ toast('Clipboard unavailable'); }
  });

  // Actors UI (cowboy/tumbleweed presence & animation)
  function applyActorVisibility(){
    els.robot.style.display = els.cowboyToggle.checked ? '' : 'none';
    els.weed.style.display  = els.weedToggle.checked   ? '' : 'none';
  }
  function restartAnim(el, cls){
    el.classList.remove(cls);
    void el.offsetWidth; // force reflow
    el.classList.add(cls);
  }
  function startAnim(){
    const walkDur = (26 + randInt(12)) + 's';
    const rollDur = (30 + randInt(12)) + 's';
    const walkDelay = (randInt(300)/100) + 's';
    const rollDelay = (randInt(500)/100 + 1.0) + 's';
    document.documentElement.style.setProperty('--walk-duration', walkDur);
    document.documentElement.style.setProperty('--roll-duration', rollDur);
    document.documentElement.style.setProperty('--walk-delay', walkDelay);
    document.documentElement.style.setProperty('--roll-delay', rollDelay);
    if(els.cowboyToggle.checked){
      els.robot.classList.remove('idle');
      restartAnim(els.robot, 'walk');
    }
    if(els.weedToggle.checked){
      restartAnim(els.weed, 'roll');
    }
  }
  function stopAnim(){
    els.robot.classList.remove('walk');
    els.weed.classList.remove('roll');
    if(els.cowboyToggle.checked){ els.robot.classList.add('idle'); }
  }

  // Persist toggles
  function loadToggles(){
    const animPref = localStorage.getItem('pf_animations');
    if(animPref !== null) els.animToggle.checked = (animPref==='1');
    const cowPref = localStorage.getItem('pf_cowboy');
    if(cowPref !== null) els.cowboyToggle.checked = (cowPref==='1');
    const weedPref = localStorage.getItem('pf_weed');
    if(weedPref !== null) els.weedToggle.checked = (weedPref==='1');
    if(window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches){
      els.animToggle.checked = false;
    }
  }
  function saveToggle(key, checked){ localStorage.setItem(key, checked ? '1':'0'); }

  els.animToggle.addEventListener('change', () => { saveToggle('pf_animations', els.animToggle.checked); els.animToggle.checked ? startAnim() : stopAnim(); });
  els.cowboyToggle.addEventListener('change', () => { saveToggle('pf_cowboy', els.cowboyToggle.checked); applyActorVisibility(); els.animToggle.checked ? startAnim() : stopAnim(); });
  els.weedToggle.addEventListener('change',   () => { saveToggle('pf_weed', els.weedToggle.checked); applyActorVisibility(); els.animToggle.checked ? startAnim() : stopAnim(); });

  loadToggles();
  applyActorVisibility();
  els.animToggle.checked ? startAnim() : stopAnim();

  // Initial output
  // Seed with a first value for correct masked length
  state.reveal = false;
  els.reveal.textContent = 'Show';
  els.reveal.setAttribute('aria-pressed','false');
  generate();
})();
</script>
</body>
</html>
